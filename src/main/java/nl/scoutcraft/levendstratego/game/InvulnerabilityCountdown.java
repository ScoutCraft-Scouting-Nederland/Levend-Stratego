package nl.scoutcraft.levendstratego.game;

import nl.scoutcraft.eagle.server.locale.IMessage;
import nl.scoutcraft.eagle.server.locale.Placeholder;
import nl.scoutcraft.levendstratego.LevendStratego;
import nl.scoutcraft.levendstratego.i18n.Messages;
import nl.scoutcraft.levendstratego.utils.Countdown;
import org.bukkit.entity.Player;

public class InvulnerabilityCountdown extends Countdown {

    private static final int INVULNERABILITY_SECONDS = LevendStratego.getInstance().getConfig().getInt("game.death.invulnerability_seconds");

    private final Player player;
    private final IMessage message;

    public InvulnerabilityCountdown(Player player) {
        super(INVULNERABILITY_SECONDS);

        this.player = player;
        this.message = Messages.SPAWN_INVULNERABILITY;
    }

    @Override
    public void onSecond(int secondsLeft) {
        this.message.sendActionBar(this.player, new Placeholder("%seconds%", String.valueOf(secondsLeft)));
    }

    @Override
    public void onZero() {
        this.player.sendActionBar(Messages.SPAWN_INVULNERABILITY_END.get(this.player, true));
        this.player.setInvulnerable(false);
    }
}
